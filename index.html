<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Royal Keno KZ</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --gold:#D4AF37;--gold2:#F5D060;--gold3:#8B6914;
  --em:#00C878;--em2:#00FF9A;--ruby:#E63950;
  --obs:#050508;--d1:#0C0C12;--d2:#121218;--d3:#1A1A24;
  --bdr:rgba(212,175,55,.15);--bdr2:rgba(212,175,55,.35);
  --txt:#EEE8D5;--mut:#5A5470;
}
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;user-select:none;}
html,body{height:100%;overflow:hidden;background:var(--obs);}
body{color:var(--txt);font-family:'Montserrat',sans-serif;font-size:14px;}
#bg{position:fixed;inset:0;z-index:0;pointer-events:none;}
.app{position:relative;z-index:1;display:flex;flex-direction:column;height:100vh;height:100dvh;overflow:hidden;}
.hdr{flex-shrink:0;background:rgba(12,12,18,.97);border-bottom:1px solid var(--bdr2);padding:10px 14px;display:flex;align-items:center;justify-content:space-between;position:relative;}
.hdr::after{content:'';position:absolute;bottom:-1px;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent);}
.logo{font-family:'Cinzel',serif;font-size:13px;font-weight:900;letter-spacing:3px;background:linear-gradient(135deg,var(--gold3),var(--gold2),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.bal{display:flex;align-items:center;gap:5px;background:rgba(212,175,55,.06);border:1px solid var(--bdr2);padding:5px 12px;border-radius:24px;cursor:pointer;}
.bal-amt{font-family:'Cinzel',serif;font-size:13px;font-weight:700;color:var(--gold2);}
.subnav{flex-shrink:0;display:flex;background:var(--d1);border-bottom:1px solid var(--bdr);overflow-x:auto;scrollbar-width:none;}
.subnav::-webkit-scrollbar{display:none;}
.snv{flex:0 0 auto;padding:9px 12px;background:none;border:none;color:var(--mut);font-family:'Montserrat',sans-serif;font-size:10px;font-weight:700;cursor:pointer;transition:all .25s;white-space:nowrap;letter-spacing:1.5px;text-transform:uppercase;position:relative;}
.snv::after{content:'';position:absolute;bottom:0;left:50%;right:50%;height:2px;background:linear-gradient(90deg,var(--gold3),var(--gold2));transition:all .3s cubic-bezier(.34,1.56,.64,1);}
.snv.on{color:var(--gold2);}.snv.on::after{left:6px;right:6px;}
.scr{flex:1;overflow-y:auto;overflow-x:hidden;padding:14px 13px 16px;scrollbar-width:thin;scrollbar-color:var(--gold3) transparent;}
.scr::-webkit-scrollbar{width:3px;}.scr::-webkit-scrollbar-thumb{background:var(--gold3);}
.card{background:linear-gradient(135deg,rgba(26,26,36,.95),rgba(18,18,24,.95));border:1px solid var(--bdr);border-radius:14px;padding:15px;margin-bottom:11px;position:relative;overflow:hidden;}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(212,175,55,.4),transparent);}
.ctit{font-family:'Cinzel',serif;font-size:10px;font-weight:700;color:var(--gold);letter-spacing:3px;text-transform:uppercase;margin-bottom:13px;}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:6px;width:100%;padding:12px 18px;border:none;border-radius:10px;font-family:'Montserrat',sans-serif;font-size:13px;font-weight:700;cursor:pointer;letter-spacing:1.5px;text-transform:uppercase;transition:all .15s;margin-bottom:8px;}
.btn:active{transform:scale(.97);}.btn:disabled{opacity:.35;cursor:not-allowed;transform:none;}
.btn-gold{background:linear-gradient(135deg,#8B6914,#D4AF37,#F5D060);color:#1a1200;box-shadow:0 4px 20px rgba(212,175,55,.3);}
.btn-em{background:linear-gradient(135deg,#006640,#00C878);color:#001a0d;}
.btn-ghost{background:transparent;border:1px solid var(--bdr2);color:var(--gold);}
.g2{display:grid;grid-template-columns:1fr 1fr;gap:8px;}
.fld{margin-bottom:11px;}
.flbl{font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--mut);margin-bottom:5px;font-weight:700;}
.inp{width:100%;background:rgba(5,5,8,.8);border:1px solid var(--bdr);border-radius:8px;padding:10px 13px;color:var(--txt);font-family:'Montserrat',sans-serif;font-size:15px;font-weight:600;outline:none;transition:border-color .2s;-webkit-appearance:none;}
.inp:focus{border-color:var(--gold);}.inp::placeholder{color:var(--mut);}
.pres{display:flex;gap:5px;flex-wrap:wrap;margin-bottom:11px;}
.pre{padding:5px 9px;background:rgba(212,175,55,.05);border:1px solid var(--bdr);border-radius:6px;color:var(--mut);font-size:11px;font-weight:700;cursor:pointer;transition:all .15s;}
.pre.on,.pre:active{border-color:var(--gold);color:var(--gold);background:rgba(212,175,55,.1);}
.res{border-radius:12px;padding:16px;text-align:center;margin-top:13px;animation:rPop .4s cubic-bezier(.34,1.56,.64,1);}
.rw{background:rgba(0,200,120,.08);border:1px solid rgba(0,200,120,.25);}
.rl{background:rgba(230,57,80,.08);border:1px solid rgba(230,57,80,.2);}
.rt{background:rgba(212,175,55,.08);border:1px solid rgba(212,175,55,.2);}
.rbig{font-family:'Cinzel',serif;font-size:24px;font-weight:900;}
.rw .rbig{color:var(--em2);}.rl .rbig{color:var(--ruby);}.rt .rbig{color:var(--gold2);}
.rsub{font-size:10px;color:var(--mut);margin-top:4px;letter-spacing:2px;text-transform:uppercase;}
.sl{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid var(--bdr);}
.sl:last-child{border:none;}.sk{color:var(--mut);font-size:12px;}.sv{font-weight:700;font-size:13px;font-family:'Cinzel',serif;}
.spinner{width:18px;height:18px;border:2px solid var(--bdr);border-top-color:var(--gold);border-radius:50%;animation:spin .6s linear infinite;display:inline-block;}
.loading{display:flex;align-items:center;justify-content:center;gap:8px;padding:30px;color:var(--mut);}
.toast{position:fixed;bottom:74px;left:50%;transform:translateX(-50%);background:rgba(18,18,24,.97);border:1px solid var(--bdr2);border-radius:10px;padding:9px 18px;font-size:13px;font-weight:600;color:var(--txt);z-index:9999;white-space:nowrap;animation:slideUp .3s ease;}
.particle{position:fixed;pointer-events:none;z-index:9998;font-size:20px;animation:pFly 1.2s ease forwards;}
.welcome{display:flex;flex-direction:column;align-items:center;padding:20px 4px;}
.wlogo{font-family:'Cinzel',serif;font-size:26px;font-weight:900;background:linear-gradient(135deg,var(--gold3),var(--gold2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:6px;animation:float 3s ease infinite;}
.perk{display:flex;align-items:center;gap:10px;padding:9px 13px;background:rgba(212,175,55,.04);border:1px solid var(--bdr);border-radius:10px;margin-bottom:7px;}
.avatar{width:68px;height:68px;border-radius:50%;background:linear-gradient(135deg,var(--gold3),var(--gold2));display:flex;align-items:center;justify-content:center;margin:0 auto 10px;font-size:30px;}
.vip-b{display:inline-flex;align-items:center;gap:5px;background:linear-gradient(135deg,var(--gold3),var(--gold));color:#1a1000;padding:3px 11px;border-radius:20px;font-family:'Cinzel',serif;font-size:11px;font-weight:700;letter-spacing:2px;}
.hrow{display:flex;align-items:center;gap:8px;padding:9px 0;border-bottom:1px solid var(--bdr);}
.hrow:last-child{border:none;}.hico{width:32px;height:32px;border-radius:8px;background:var(--d3);display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;}
.hinfo{flex:1;}.hgame{font-size:12px;font-weight:700;}.hdate{font-size:10px;color:var(--mut);}
.hamt{font-family:'Cinzel',serif;font-size:13px;font-weight:700;}.hamt.w{color:var(--em2);}.hamt.l{color:var(--ruby);}
.trow{display:flex;align-items:center;gap:10px;padding:9px 0;border-bottom:1px solid var(--bdr);}
.trow:last-child{border:none;}.trank{font-family:'Cinzel',serif;font-size:16px;font-weight:900;width:28px;color:var(--mut);}
.trank.g{color:#FFD700;}.trank.s{color:#C0C0C0;}.trank.b{color:#CD7F32;}
.tname{flex:1;font-weight:700;}.tbal{color:var(--gold);font-weight:700;font-family:'Cinzel',serif;}
.ref-link{background:var(--obs);border:1px solid var(--bdr2);border-radius:8px;padding:10px 13px;font-size:11px;color:var(--gold2);word-break:break-all;margin-bottom:10px;cursor:pointer;}
.rss{flex:1;text-align:center;padding:12px;background:rgba(212,175,55,.04);border:1px solid var(--bdr);border-radius:10px;}
.rssv{font-family:'Cinzel',serif;font-size:22px;font-weight:700;color:var(--gold2);}
.rssl{font-size:10px;color:var(--mut);text-transform:uppercase;letter-spacing:1px;margin-top:3px;}
.dbadge{display:inline-flex;align-items:center;gap:5px;background:rgba(230,57,80,.1);border:1px solid rgba(230,57,80,.3);padding:4px 10px;border-radius:20px;font-size:11px;color:var(--ruby);margin-bottom:10px;font-weight:700;}
.rbadge{display:inline-flex;align-items:center;gap:4px;background:rgba(212,175,55,.08);border:1px solid var(--bdr2);padding:4px 10px;border-radius:20px;font-size:11px;color:var(--gold2);margin-bottom:12px;}
.arena{background:radial-gradient(ellipse at 50% 100%,rgba(0,200,120,.06),transparent),linear-gradient(180deg,var(--d1),var(--obs));border:1px solid var(--bdr);border-radius:14px;height:185px;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:13px;position:relative;overflow:hidden;}
.arena canvas{position:absolute;inset:0;width:100%;height:100%;}
.cmult{font-family:'Cinzel',serif;font-size:50px;font-weight:900;position:relative;z-index:2;transition:color .3s;}
.cmult.idle{color:var(--gold2);}.cmult.fly{color:var(--em2);animation:rkP .4s ease infinite;}.cmult.boom{color:var(--ruby);animation:shake .4s ease;}
.cst{font-size:10px;letter-spacing:3px;text-transform:uppercase;margin-top:5px;position:relative;z-index:2;}
.cst.idle{color:var(--mut);}.cst.fly{color:var(--em);}.cst.boom{color:var(--ruby);}
.smach{background:linear-gradient(180deg,var(--obs),var(--d1));border:2px solid var(--bdr2);border-radius:16px;padding:14px 10px;margin-bottom:13px;position:relative;}
.smach::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--gold),transparent);}
.reels{display:flex;gap:7px;}
.reel{flex:1;height:88px;background:var(--obs);border:1px solid var(--bdr);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:40px;}
.reel.win{border-color:var(--gold);box-shadow:0 0 20px rgba(212,175,55,.4);animation:glow 1s ease infinite;}
.sline{position:absolute;top:50%;left:0;right:0;height:2px;transform:translateY(-50%);background:linear-gradient(90deg,transparent,rgba(212,175,55,.6),transparent);}
.felt{background:radial-gradient(ellipse at 50% 100%,#0d3320,#071a10);border:2px solid rgba(0,80,30,.6);border-radius:16px;padding:14px;margin-bottom:11px;min-height:195px;position:relative;}
.felt::before{content:'';position:absolute;inset:5px;border:1px solid rgba(0,100,40,.3);border-radius:10px;pointer-events:none;}
.hlbl{font-size:9px;letter-spacing:3px;color:rgba(255,255,255,.3);text-transform:uppercase;margin-bottom:5px;font-family:'Cinzel',serif;}
.hand{display:flex;flex-wrap:nowrap;margin-bottom:5px;min-height:62px;align-items:center;}
.pc{width:42px;height:60px;border-radius:6px;display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;padding:3px 4px;font-size:12px;font-weight:900;border:1px solid rgba(0,0,0,.2);box-shadow:2px 3px 8px rgba(0,0,0,.5);flex-shrink:0;margin-right:-8px;animation:cD .25s ease;font-family:'Cinzel',serif;position:relative;}
.pc.wh{background:linear-gradient(135deg,#fff,#f0f0f0);color:#111;}.pc.rd{background:#fff;color:#c0392b;}
.pc.bk{background:linear-gradient(135deg,#1a3a8f,#0d1f5f);align-items:center;justify-content:center;font-size:22px;}
.pcs{font-size:10px;position:absolute;bottom:2px;right:3px;opacity:.7;}
.ws{display:flex;justify-content:center;margin-bottom:15px;}
.wo{width:150px;height:150px;border-radius:50%;background:conic-gradient(#c0392b 0 9.73deg,#111 9.73deg 19.46deg,#c0392b 19.46deg 29.19deg,#111 29.19deg 38.92deg,#c0392b 38.92deg 48.65deg,#111 48.65deg 58.38deg,#c0392b 58.38deg 68.11deg,#111 68.11deg 77.84deg,#c0392b 77.84deg 87.57deg,#2ecc71 87.57deg 97.3deg,#c0392b 97.3deg 107.03deg,#111 107.03deg 116.76deg,#c0392b 116.76deg 126.49deg,#111 126.49deg 136.22deg,#c0392b 136.22deg 145.95deg,#111 145.95deg 155.68deg,#c0392b 155.68deg 165.41deg,#111 165.41deg 175.14deg,#c0392b 175.14deg 184.87deg,#111 184.87deg 194.6deg,#c0392b 194.6deg 204.33deg,#111 204.33deg 214.06deg,#c0392b 214.06deg 223.79deg,#111 223.79deg 233.52deg,#c0392b 233.52deg 243.25deg,#111 243.25deg 252.98deg,#c0392b 252.98deg 262.71deg,#111 262.71deg 272.44deg,#c0392b 272.44deg 282.17deg,#111 282.17deg 291.9deg,#c0392b 291.9deg 301.63deg,#111 301.63deg 311.36deg,#c0392b 311.36deg 321.09deg,#111 321.09deg 330.82deg,#c0392b 330.82deg 340.55deg,#111 340.55deg 350.28deg,#c0392b 350.28deg 360deg);border:3px solid var(--gold);display:flex;align-items:center;justify-content:center;transition:transform 2.5s cubic-bezier(.17,.67,.08,1);}
.wi{width:40px;height:40px;border-radius:50%;background:radial-gradient(circle,var(--d2),var(--obs));border:2px solid var(--gold);display:flex;align-items:center;justify-content:center;font-family:'Cinzel',serif;font-size:12px;font-weight:700;color:var(--gold2);}
.wp{position:absolute;top:-5px;left:50%;transform:translateX(-50%);width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:12px solid var(--gold);}
.bts{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-bottom:11px;}
.bbt{padding:9px 7px;border-radius:8px;border:1px solid var(--bdr);background:rgba(5,5,8,.6);color:var(--mut);font-size:12px;font-weight:700;cursor:pointer;text-align:center;transition:all .2s;}
.bbt.on{border-color:var(--gold);background:rgba(212,175,55,.08);color:var(--gold2);}
.kg{display:grid;grid-template-columns:repeat(10,1fr);gap:3px;margin-bottom:11px;}
.kn{aspect-ratio:1;border-radius:5px;background:rgba(5,5,8,.8);border:1px solid rgba(212,175,55,.08);display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;cursor:pointer;transition:all .12s;}
.kn:active{transform:scale(.85);}
.kn.sel{background:rgba(212,175,55,.15);border-color:var(--gold);color:var(--gold2);}
.kn.drw{background:rgba(0,200,120,.1);border-color:rgba(0,200,120,.4);color:var(--em2);}
.kn.hit{background:rgba(212,175,55,.3);border-color:var(--gold);color:var(--gold2);animation:hitP .5s ease;}
.ksts{display:flex;justify-content:space-between;margin-bottom:9px;}
.ksv{font-family:'Cinzel',serif;font-size:17px;font-weight:700;color:var(--gold2);}
.ksl{font-size:9px;color:var(--mut);letter-spacing:2px;text-transform:uppercase;margin-top:2px;}
.bnav{flex:0 0 auto;display:flex;background:var(--d1);border-top:1px solid var(--bdr);padding:6px 2px;}
.bni{flex:1;background:none;border:none;padding:5px 2px;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:2px;}
.bni span:first-child{font-size:17px;}
.dot{width:4px;height:4px;border-radius:50%;transition:all .2s;}
@keyframes rPop{from{opacity:0;transform:scale(.85) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}
@keyframes glow{0%,100%{box-shadow:0 0 10px rgba(212,175,55,.3)}50%{box-shadow:0 0 30px rgba(212,175,55,.7)}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-4px)}75%{transform:translateX(4px)}}
@keyframes cD{from{opacity:0;transform:translateX(-15px)}to{opacity:1;transform:none}}
@keyframes rkP{0%,100%{transform:scale(1)}50%{transform:scale(1.08) translateY(-4px)}}
@keyframes hitP{0%{transform:scale(1)}50%{transform:scale(1.3)}100%{transform:scale(1)}}
@keyframes slideUp{from{opacity:0;transform:translate(-50%,20px)}to{opacity:1;transform:translate(-50%,0)}}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
@keyframes pFly{0%{opacity:1;transform:translateY(0) scale(1)}100%{opacity:0;transform:translateY(-120px) scale(.3) rotate(360deg)}}
</style>
</head>
<body>
<canvas id="bg"></canvas>
<div id="root"></div>
<script>

(function(){
  var cv=document.getElementById('bg'),ctx=cv.getContext('2d'),ps=[];
  function rs(){cv.width=innerWidth;cv.height=innerHeight;}
  rs();window.addEventListener('resize',rs);
  for(var i=0;i<50;i++)ps.push({x:Math.random()*1e3,y:Math.random()*1e3,vx:(Math.random()-.5)*.2,vy:(Math.random()-.5)*.2,r:Math.random()*1.5+.3,a:Math.random()});
  (function fr(){ctx.clearRect(0,0,cv.width,cv.height);ps.forEach(function(p){p.x+=p.vx;p.y+=p.vy;if(p.x<0)p.x=cv.width;if(p.x>cv.width)p.x=0;if(p.y<0)p.y=cv.height;if(p.y>cv.height)p.y=0;ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fillStyle='rgba(212,175,55,'+p.a*.12+')';ctx.fill();});requestAnimationFrame(fr);})();
})();
</script>
<script type="text/babel" data-presets="env">
var useState = React.useState;
var useEffect = React.useEffect;
var useRef = React.useRef;

var tg = window.Telegram && window.Telegram.WebApp;
var tgUser = tg && tg.initDataUnsafe && tg.initDataUnsafe.user;


var SERVER_URL = ""; 
var DEMO_MODE = !SERVER_URL;
var RATE = 0.013; // 1 Star = $0.013


var D = {
  reg: false, username: "", balance: 500, vip: 1,
  games: 0, wins: 0, total_bet: 0, total_win: 0,
  history: [], last_bonus: null, nonce: 0,
  hashed_seed: "demo_provably_fair_hash",
  had_deposit: false, invoice: null,
  cashback_claimed: null
};


function api(method, body, silent) {
  body = body || {};
  if (DEMO_MODE) {
    return new Promise(function(resolve) {
      setTimeout(function() { resolve(demoApi(method, body)); }, 80);
    });
  }
  return fetch(SERVER_URL + "/api/" + method, {
    method: "POST",
    headers: {"Content-Type":"application/json","X-Init-Data": tg ? tg.initData : ""},
    body: JSON.stringify(body)
  }).then(function(r){ return r.json(); }).catch(function(){
    if (!silent) showToast("‚ö†Ô∏è –ù–µ—Ç —Å–≤—è–∑–∏");
    return {ok:false};
  });
}

function demoApi(method, body) {
  if (method === "profile") {
    if (!D.reg) return {ok:false};
    return {ok:true, data:{username:D.username,balance:D.balance,vip:D.vip,
      games:D.games,wins:D.wins,total_bet:D.total_bet,total_win:D.total_win,
      hashed_seed:D.hashed_seed,nonce:D.nonce}};
  }
  if (method === "register") {
    var reserved = ["admin","royal","keno","bot","system","moderator","support"];
    if (reserved.indexOf((body.username||"").toLowerCase()) !== -1)
      return {ok:false, error:"–≠—Ç–æ—Ç –Ω–∏–∫–Ω–µ–π–º –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω"};
    D.reg = true; D.username = body.username || "–ò–≥—Ä–æ–∫"; D.balance = 500;
    return {ok:true, balance:500};
  }
  if (method === "play") {
    D.balance = D.balance - body.bet + (body.win || 0);
    D.games++; if (body.win > body.bet) D.wins++;
    D.total_bet += body.bet; D.total_win += (body.win || 0);
    var n = D.nonce++;
    D.history.unshift({game:body.game,date:new Date().toISOString(),
      bet:body.bet,spot:body.spot||0,hits:body.hits||0,win:body.win||0,nonce:n});
    if (D.history.length > 30) D.history.pop();
    return {ok:true, balance:D.balance, nonce:n};
  }
  if (method === "balance") return {ok:true,balance:D.balance,vip:D.vip,rate:RATE};
  if (method === "rate") return {ok:true,rate:RATE,formatted:"1 USDT = 76 ‚òÖ  ¬∑  1000 ‚òÖ = $13.00"};
  if (method === "bonus_status") {
    if (!D.last_bonus) return {ok:true,can_claim:true};
    var diff = Date.now() - D.last_bonus;
    if (diff >= 86400000) return {ok:true,can_claim:true};
    var left = 86400000 - diff;
    var h = Math.floor(left/3600000), m = Math.floor((left%3600000)/60000);
    return {ok:true,can_claim:false,time_left:(h<10?"0":"")+h+":"+(m<10?"0":"")+m};
  }
  if (method === "claim_bonus") {
    if (D.last_bonus && Date.now()-D.last_bonus < 86400000) return {ok:false,time_left:"23:59"};
    var bonus = Math.floor(20*(1+(D.vip-1)*.2));
    D.balance += bonus; D.last_bonus = Date.now();
    return {ok:true,bonus:bonus};
  }
  if (method === "cashback_status") {
    var loss = D.total_bet - D.total_win;
    if (loss < 1000) return {ok:true,available:false,min_loss:1000,current_loss:Math.max(0,loss)};
    if (D.cashback_claimed && Date.now()-D.cashback_claimed < 7*86400000)
      return {ok:true,available:false,days_left:7-Math.floor((Date.now()-D.cashback_claimed)/86400000)};
    return {ok:true,available:true,cashback:Math.floor(loss*.05),weekly_loss:loss};
  }
  if (method === "claim_cashback") {
    var loss2 = D.total_bet - D.total_win;
    if (loss2 < 1000) return {ok:false,error:"–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–∏–≥—Ä—ã—à–µ–π"};
    var cb = Math.floor(loss2*.05);
    D.balance += cb; D.cashback_claimed = Date.now();
    return {ok:true,cashback:cb,balance:D.balance};
  }
  if (method === "create_invoice") {
    var stars = Math.floor(body.amount_usdt / RATE);
    var isFirst = !D.had_deposit;
    var bonus = isFirst ? stars : 0;
    var total = stars + bonus;
    D.invoice = {id:Date.now()%1000000,usdt:body.amount_usdt,stars:stars,bonus:bonus,total:total,isFirst:isFirst};
    return {ok:true,invoice_id:D.invoice.id,pay_url:"https://t.me/CryptoBot",
      amount_usdt:body.amount_usdt,stars:stars,bonus_stars:bonus,stars_total:total,is_first:isFirst,demo:true};
  }
  if (method === "check_invoice") {
    if (!D.invoice) return {ok:false,error:"–°—á—ë—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω"};
    D.balance += D.invoice.total;
    if (D.invoice.isFirst) D.had_deposit = true;
    var res = {ok:true,paid:true,stars:D.invoice.total,bonus_stars:D.invoice.bonus,demo:true};
    D.invoice = null;
    return res;
  }
  if (method === "withdraw") {
    if (body.stars > D.balance) return {ok:false,error:"–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–∞–Ω—Å–∞"};
    D.balance -= body.stars;
    return {ok:true,stars:body.stars,usdt:parseFloat((body.stars*RATE).toFixed(4)),demo:true};
  }
  if (method === "history") return {ok:true,history:D.history};
  if (method === "top") return {ok:true,top:[{username:D.username||"–í—ã",balance:D.balance,vip:D.vip}]};
  if (method === "referrals") return {ok:true,count:0};
  return {ok:true};
}


var Snd = {
  _c: null,
  i: function(){ if(!this._c) this._c=new(window.AudioContext||window.webkitAudioContext)(); },
  b: function(f,d,t,v){ if(!this._c)return; var o=this._c.createOscillator(),g=this._c.createGain(); o.connect(g);g.connect(this._c.destination);o.type=t||'sine';o.frequency.value=f;g.gain.setValueAtTime(v||.12,this._c.currentTime);g.gain.exponentialRampToValueAtTime(.001,this._c.currentTime+d);o.start();o.stop(this._c.currentTime+d); },
  win: function(){ this.b(523,.1);setTimeout(function(){Snd.b(659,.1);},100);setTimeout(function(){Snd.b(784,.15);},200);setTimeout(function(){Snd.b(1047,.3);},300); },
  lose: function(){ this.b(330,.1,'sawtooth');setTimeout(function(){Snd.b(220,.3,'sawtooth');},100); },
  click: function(){ this.b(800,.05,'square',.05); },
  tick: function(){ this.b(1200,.04,'square',.08); },
  deal: function(){ this.b(600,.08,'triangle',.1); },
  jackpot: function(){ [523,659,784,1047,1319,1568].forEach(function(f,i){setTimeout(function(){Snd.b(f,.15);},i*80);}); }
};

var _toast_timer;
function showToast(msg) {
  clearTimeout(_toast_timer);
  var t = document.querySelector('.toast');
  if (!t) { t = document.createElement('div'); t.className='toast'; document.body.appendChild(t); }
  t.textContent = msg;
  _toast_timer = setTimeout(function(){ if(t.parentNode) t.parentNode.removeChild(t); }, 2500);
}

function burst(win) {
  var e = win ? ['‚≠ê','‚ú®','üí∞','üéâ'] : ['üí®'];
  for (var i = 0; i < (win ? 8 : 3); i++) {
    (function(){
      var el = document.createElement('div');
      el.className = 'particle';
      el.textContent = e[Math.floor(Math.random()*e.length)];
      el.style.left = (innerWidth/2+(Math.random()-.5)*60)+'px';
      el.style.top = '200px';
      el.style.animationDelay = (Math.random()*.3)+'s';
      document.body.appendChild(el);
      setTimeout(function(){ if(el.parentNode) el.parentNode.removeChild(el); }, 1500);
    })();
  }
}

function fmtDate(iso) {
  try {
    var d = new Date(iso);
    return d.getDate()+'.'+(d.getMonth()+1<10?'0':'')+(d.getMonth()+1)+' '+d.getHours()+':'+(d.getMinutes()<10?'0':'')+d.getMinutes();
  } catch(e) { return ''; }
}


function BetInput(props) {
  var value = props.value, onChange = props.onChange, balance = props.balance;
  return React.createElement('div', null,
    React.createElement('div', {className:'fld'},
      React.createElement('div', {className:'flbl'}, '–°—Ç–∞–≤–∫–∞ ‚òÖ'),
      React.createElement('input', {className:'inp',type:'number',value:value,
        onChange:function(e){onChange(+e.target.value);}})
    ),
    React.createElement('div', {className:'pres'},
      [50,100,250,500].map(function(v){
        return React.createElement('button',{key:v,className:'pre '+(value===v?'on':''),
          onClick:function(){Snd.i();Snd.click();onChange(v);}},v);
      }),
      React.createElement('button',{className:'pre',onClick:function(){Snd.i();Snd.click();onChange(Math.floor(balance/2));}}, '¬Ω'),
      React.createElement('button',{className:'pre',onClick:function(){Snd.i();Snd.click();onChange(balance);}}, 'MAX')
    )
  );
}


function Registration(props) {
  var onDone = props.onDone;
  var stepState = useState(1); var step = stepState[0]; var setStep = stepState[1];
  var nameState = useState((tgUser && tgUser.first_name) || ''); var name = nameState[0]; var setName = nameState[1];
  var errState = useState(''); var err = errState[0]; var setErr = errState[1];
  var loadState = useState(false); var loading = loadState[0]; var setLoading = loadState[1];

  function submit() {
    var n = name.trim();
    if (n.length < 2 || n.length > 20) { setErr('–û—Ç 2 –¥–æ 20 —Å–∏–º–≤–æ–ª–æ–≤'); return; }
    if (!/^[a-zA-Za-zA-Z0-9_-]+$/.test(n) && !/^[\u0400-\u04ffa-zA-Z0-9_-]+$/.test(n)) { setErr('–ë—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, _ –∏ -'); return; }
    setLoading(true); setErr('');
    var ref = tg && tg.initDataUnsafe && tg.initDataUnsafe.start_param;
    if (ref) ref = ref.replace('ref_','');
    api('register', {username:n, ref_id:ref?+ref:null}).then(function(r) {
      if (r.ok) { Snd.i(); Snd.win(); onDone({username:n, balance:r.balance||500, vip:1}); }
      else { setErr(r.error||'–û—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞.'); setLoading(false); }
    });
  }

  if (step === 1) return React.createElement('div', {className:'welcome'},
    React.createElement('div', {className:'wlogo'}, 'ROYAL KENO KZ'),
    React.createElement('div', {style:{fontSize:11,color:'var(--mut)',letterSpacing:3,textTransform:'uppercase',marginBottom:24}}, '–û–Ω–ª–∞–π–Ω –∫–∞–∑–∏–Ω–æ'),
    React.createElement('div', {style:{fontSize:34,marginBottom:24}}, 'üé∞ üÉè üé° üöÄ üé≤'),
    React.createElement('div', {style:{width:'100%',marginBottom:20}},
      [['üí∞','–°—Ç–∞—Ä—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å 500 ‚òÖ'],['üéÅ','–ë–æ–Ω—É—Å –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞'],['üèÜ','–¢–û–ü-10 –∏–≥—Ä–æ–∫–æ–≤'],['üë•','–†–µ—Ñ–µ—Ä–∞–ª–∫–∞ +500 ‚òÖ'],['üîí','–ê–Ω–æ–Ω–∏–º–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ USDT']].map(function(item){
        return React.createElement('div',{key:item[1],className:'perk'},
          React.createElement('span',{style:{fontSize:20}},item[0]),
          React.createElement('span',{style:{fontSize:13}},item[1])
        );
      })
    ),
    React.createElement('button',{className:'btn btn-gold',onClick:function(){setStep(2);}}, 'üé∞ –ù–ê–ß–ê–¢–¨ –ò–ì–†–ê–¢–¨')
  );

  return React.createElement('div', {style:{padding:'20px 4px'}},
    React.createElement('div', {style:{textAlign:'center',marginBottom:20}},
      React.createElement('div', {style:{fontSize:36,marginBottom:8,animation:'float 2s ease infinite'}}, 'üëë'),
      React.createElement('div', {style:{fontFamily:"'Cinzel',serif",fontSize:16,fontWeight:700}}, '–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å')
    ),
    React.createElement('div', {className:'fld'},
      React.createElement('div', {className:'flbl'}, '–ù–∏–∫–Ω–µ–π–º'),
      React.createElement('input', {className:'inp',value:name,onChange:function(e){setName(e.target.value);},
        placeholder:'Lucky_Player',maxLength:20,
        onKeyDown:function(e){if(e.key==='Enter')submit();},autoFocus:true}),
      err ? React.createElement('div',{style:{color:'var(--ruby)',fontSize:12,marginTop:5}},err) : null
    ),
    React.createElement('div', {style:{fontSize:11,color:'var(--mut)',marginBottom:16}}, '2‚Äì20 —Å–∏–º–≤–æ–ª–æ–≤ ¬∑ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, _ –∏ -'),
    React.createElement('button', {className:'btn btn-gold',onClick:submit,disabled:loading},
      loading ? React.createElement('span',null,React.createElement('div',{className:'spinner'}),' –°–û–ó–î–ê–Å–ú...') : '‚úÖ –°–û–ó–î–ê–¢–¨ –ü–†–û–§–ò–õ–¨'
    ),
    React.createElement('button', {className:'btn btn-ghost',onClick:function(){setStep(1);}}, '‚Üê –ù–ê–ó–ê–î')
  );
}


var VIP_NAMES = ['','BRONZE','SILVER','GOLD','PLATINUM','DIAMOND'];
var VIP_COLORS = ['','#CD7F32','#C0C0C0','#FFD700','#E5E4E2','#b9f2ff'];
var VIP_REQ = [0,0,10000,50000,200000,500000];

function ProfilePage(props) {
  var profile = props.profile, balance = props.balance, onRefresh = props.onRefresh;
  var vip = profile.vip || 1;
  var profit = (profile.total_win||0) - (profile.total_bet||0);
  var wr = profile.games > 0 ? ((profile.wins/profile.games)*100).toFixed(1) : 0;
  var nextReq = VIP_REQ[Math.min(vip+1,5)] || VIP_REQ[5];
  var curReq = VIP_REQ[vip] || 0;
  var pct = vip >= 5 ? 100 : Math.min(100, Math.floor(((profile.total_bet||0)-curReq)/(nextReq-curReq)*100));
  var seedState = useState(false); var showSeed = seedState[0]; var setShowSeed = seedState[1];

  return React.createElement('div', null,
    
    React.createElement('div', {className:'card',style:{textAlign:'center',padding:'20px 15px'}},
      React.createElement('div', {className:'avatar'}, 'üëë'),
      React.createElement('div', {style:{fontFamily:"'Cinzel',serif",fontSize:18,fontWeight:700,marginBottom:6}}, profile.username),
      React.createElement('div', {className:'vip-b',style:{background:'linear-gradient(135deg,'+VIP_COLORS[vip]+'88,'+VIP_COLORS[vip]+')',marginBottom:10}},
        '‚òÖ VIP '+vip+' ¬∑ '+VIP_NAMES[vip]
      ),
      vip < 5 ? React.createElement('div', {style:{width:'100%',margin:'8px 0'}},
        React.createElement('div', {style:{display:'flex',justifyContent:'space-between',fontSize:10,color:'var(--mut)',marginBottom:4}},
          React.createElement('span', null, (profile.total_bet||0).toLocaleString()+' ‚òÖ'),
          React.createElement('span', null, '–¥–æ VIP '+(vip+1)+': '+nextReq.toLocaleString()+' ‚òÖ')
        ),
        React.createElement('div', {style:{height:6,background:'rgba(255,255,255,.06)',borderRadius:3,overflow:'hidden'}},
          React.createElement('div', {style:{height:'100%',width:pct+'%',background:'linear-gradient(90deg,'+VIP_COLORS[vip]+','+VIP_COLORS[Math.min(vip+1,5)]+')',borderRadius:3,transition:'width .5s ease'}})
        ),
        React.createElement('div', {style:{fontSize:10,color:'var(--mut)',textAlign:'right',marginTop:3}}, pct+'%')
      ) : React.createElement('div', {style:{fontSize:11,color:'var(--gold2)',marginTop:4}}, 'üèÜ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å!'),
      React.createElement('div', {style:{fontFamily:"'Cinzel',serif",fontSize:28,fontWeight:900,color:'var(--gold2)',marginTop:10}}, balance.toLocaleString()+' ‚òÖ')
    ),
    
    React.createElement('div', {className:'card'},
      React.createElement('div', {className:'ctit'}, '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞'),
      [
        ['–°—Ç–∞–≤–æ–∫ –≤—Å–µ–≥–æ', (profile.total_bet||0).toLocaleString()+' ‚òÖ', ''],
        ['–í—ã–∏–≥—Ä–∞–Ω–æ', (profile.total_win||0).toLocaleString()+' ‚òÖ', ''],
        ['–ü—Ä–æ—Ñ–∏—Ç', (profit>=0?'+':'')+profit.toLocaleString()+' ‚òÖ', profit>=0?'var(--em2)':'var(--ruby)'],
        ['–ò–≥—Ä', profile.games||0, ''],
        ['–ü–æ–±–µ–¥', profile.wins||0, ''],
        ['–í–∏–Ω—Ä–µ–π—Ç', wr+'%', 'var(--gold2)']
      ].map(function(row){
        return React.createElement('div',{key:row[0],className:'sl'},
          React.createElement('span',{className:'sk'},row[0]),
          React.createElement('span',{className:'sv',style:{color:row[2]||'var(--txt)'}},row[1])
        );
      })
    ),
    // Provably Fair
    React.createElement('div', {className:'card'},
      React.createElement('div', {className:'ctit'}, 'üîê Provably Fair'),
      React.createElement('div', {style:{fontSize:11,color:'var(--mut)',marginBottom:10,lineHeight:1.6}},
        '–í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Å—Ç–Ω–æ. –¢—ã –º–æ–∂–µ—à—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª—é–±—É—é –∏–≥—Ä—É.'
      ),
      React.createElement('button', {className:'btn btn-ghost',style:{marginBottom:0},onClick:function(){setShowSeed(function(s){return !s;})}},
        showSeed ? 'üîí –°–∫—Ä—ã—Ç—å' : 'üîì –ü–æ–∫–∞–∑–∞—Ç—å seed'
      ),
      showSeed ? React.createElement('div', {style:{marginTop:10}},
        React.createElement('div', {className:'flbl'}, 'Hashed Server Seed'),
        React.createElement('div', {style:{background:'var(--obs)',border:'1px solid var(--bdr)',borderRadius:7,padding:'8px 10px',fontSize:10,fontFamily:'monospace',color:'var(--gold2)',wordBreak:'break-all',marginBottom:8}},
          profile.hashed_seed || '‚Äî'
        ),
        React.createElement('div', {className:'flbl'}, 'Nonce (–∏–≥—Ä–∞ #)'),
        React.createElement('div', {style:{background:'var(--obs)',border:'1px solid var(--bdr)',borderRadius:7,padding:'8px 10px',fontSize:13,fontFamily:'monospace',color:'var(--em2)'}},
          profile.nonce || 0
        )
      ) : null
    ),
    React.createElement('button', {className:'btn btn-ghost',onClick:onRefresh}, 'üîÑ –û–±–Ω–æ–≤–∏—Ç—å')
  );
}


function BonusPage(props) {
  var balance = props.balance, setBalance = props.setBalance, vip = props.vip;
  var stState = useState(null); var status = stState[0]; var setStatus = stState[1];
  var tlState = useState(''); var timeLeft = tlState[0]; var setTimeLeft = tlState[1];
  var ldState = useState(false); var loading = ldState[0]; var setLoading = ldState[1];
  var cbState = useState(null); var cashback = cbState[0]; var setCashback = cbState[1];
  var cldState = useState(false); var cbLoading = cldState[0]; var setCbLoading = cldState[1];
  var amt = Math.floor(20*(1+(vip-1)*.2));

  useEffect(function(){
    api('bonus_status',{},true).then(function(r){
      if(r.ok){setStatus(r.can_claim?'can':'wait');if(r.time_left)setTimeLeft(r.time_left);}
    });
    api('cashback_status',{},true).then(function(r){ if(r.ok) setCashback(r); });
  }, []);

  function claim() {
    setLoading(true);
    api('claim_bonus').then(function(r){
      if(r.ok){Snd.i();Snd.win();burst(true);setBalance(function(b){return b+r.bonus;});setStatus('win');showToast('üéÅ +'+r.bonus+' ‚òÖ –ø–æ–ª—É—á–µ–Ω–æ!');}
      else{setTimeLeft(r.time_left||'');setStatus('wait');}
      setLoading(false);
    });
  }

  function claimCashback() {
    setCbLoading(true);
    api('claim_cashback').then(function(r){
      if(r.ok){Snd.i();Snd.win();burst(true);setBalance(function(b){return b+r.cashback;});showToast('üí∞ –ö—ç—à–±—ç–∫ +'+r.cashback+' ‚òÖ!');setCashback({available:false,days_left:7});}
      else showToast(r.error||'‚ùå –û—à–∏–±–∫–∞');
      setCbLoading(false);
    });
  }

  return React.createElement('div', null,
    
    React.createElement('div', {className:'card',style:{textAlign:'center',padding:'20px 15px'}},
      React.createElement('div', {style:{fontFamily:"'Cinzel',serif",fontSize:38,fontWeight:900,color:'var(--gold2)',animation:'float 2s ease infinite'}}, amt+' ‚òÖ'),
      React.createElement('div', {style:{fontSize:11,color:'var(--mut)',letterSpacing:2,textTransform:'uppercase',marginTop:4}}, '–ë–æ–Ω—É—Å –¥–Ω—è ¬∑ VIP '+vip),
      timeLeft ? React.createElement('div', {style:{fontFamily:"'Cinzel',serif",fontSize:20,fontWeight:700,color:'var(--ruby)',marginTop:8}}, '‚è≥ '+timeLeft) : null
    ),
    status==='win' ? React.createElement('div',{className:'res rw'},React.createElement('div',{className:'rbig'},'+'+amt+' ‚òÖ'),React.createElement('div',{className:'rsub'},'–ü–û–õ–£–ß–ï–ù–û!')) : null,
    status==='wait' ? React.createElement('div',{className:'res rt'},React.createElement('div',{className:'rbig'},'‚è≥'),React.createElement('div',{className:'rsub'},'–°–õ–ï–î–£–Æ–©–ò–ô –ß–ï–†–ï–ó '+timeLeft)) : null,
    (status==='can'||!status) ? React.createElement('button',{className:'btn btn-gold',onClick:claim,disabled:loading||!status},
      loading ? React.createElement('span',null,React.createElement('div',{className:'spinner'}),' –ü–û–õ–£–ß–ê–ï–ú...') : 'üéÅ –ü–û–õ–£–ß–ò–¢–¨ –ë–û–ù–£–°'
    ) : null,
    
    React.createElement('div', {className:'card',style:{marginTop:4}},
      React.createElement('div', {className:'ctit'}, 'üí∞ –ö—ç—à–±—ç–∫ 5%'),
      !cashback ? React.createElement('div',{className:'loading'},React.createElement('div',{className:'spinner'}),' –ó–∞–≥—Ä—É–∂–∞–µ–º...') : null,
      cashback && cashback.available ? React.createElement('div',null,
        React.createElement('div',{style:{textAlign:'center',marginBottom:12}},
          React.createElement('div',{style:{fontFamily:"'Cinzel',serif",fontSize:30,fontWeight:900,color:'var(--em2)'}},'+'+cashback.cashback.toLocaleString()+' ‚òÖ'),
          React.createElement('div',{style:{fontSize:11,color:'var(--mut)',marginTop:4}},'5% –æ—Ç –ø—Ä–æ–∏–≥—Ä—ã—à–∞ '+cashback.weekly_loss.toLocaleString()+' ‚òÖ –∑–∞ –Ω–µ–¥–µ–ª—é')
        ),
        React.createElement('button',{className:'btn btn-em',onClick:claimCashback,disabled:cbLoading},
          cbLoading ? React.createElement('span',null,React.createElement('div',{className:'spinner'}),' –ü–û–õ–£–ß–ê–ï–ú...') : 'üí∞ –ü–û–õ–£–ß–ò–¢–¨ –ö–≠–®–ë–≠–ö'
        )
      ) : null,
      cashback && !cashback.available && cashback.days_left ? React.createElement('div',{style:{textAlign:'center',padding:'10px 0',color:'var(--mut)',fontSize:13}},
        '‚è≥ –°–ª–µ–¥—É—é—â–∏–π –∫—ç—à–±—ç–∫ —á–µ—Ä–µ–∑ ',React.createElement('b',{style:{color:'var(--gold2)'}},cashback.days_left+' –¥–Ω.')
      ) : null,
      cashback && !cashback.available && !cashback.days_left ? React.createElement('div',{style:{fontSize:12,color:'var(--mut)',lineHeight:1.6}},
        '–ü—Ä–æ–∏–≥—Ä–∞–π –º–∏–Ω–∏–º—É–º ',React.createElement('b',{style:{color:'var(--gold2)'}},(cashback.min_loss||1000).toLocaleString()+' ‚òÖ'),
        ' –∑–∞ –Ω–µ–¥–µ–ª—é. –°–µ–π—á–∞—Å: ',React.createElement('b',{style:{color:'var(--txt)'}},(cashback.current_loss||0).toLocaleString()+' ‚òÖ')
      ) : null
    ),
    
    React.createElement('div', {className:'card'},
      React.createElement('div', {className:'ctit'}, 'VIP –±–æ–Ω—É—Å—ã'),
      [1,2,3,4,5].map(function(v){
        return React.createElement('div',{key:v,className:'sl'},
          React.createElement('span',{className:'sk'},'VIP '+v+' '+'‚≠ê'.repeat(v)),
          React.createElement('span',{className:'sv',style:{color:vip>=v?'var(--gold2)':'var(--mut)'}},Math.floor(20*(1+(v-1)*.2))+' ‚òÖ/–¥–µ–Ω—å')
        );
      })
    )
  );
}


function TopupPage(props) {
  var balance = props.balance, setBalance = props.setBalance;
  var stStep = useState(1); var step = stStep[0]; var setStep = stStep[1];
  var stAmt = useState(10); var amount = stAmt[0]; var setAmount = stAmt[1];
  var stInv = useState(null); var inv = stInv[0]; var setInv = stInv[1];
  var stLd = useState(false); var loading = stLd[0]; var setLoading = stLd[1];
  var stRate = useState('1 USDT = 76 ‚òÖ'); var rateStr = stRate[0]; var setRateStr = stRate[1];
  var stars = Math.floor(amount/RATE);

  useEffect(function(){
    api('rate',{},true).then(function(r){ if(r.ok) setRateStr(r.formatted||rateStr); });
  }, []);

  function create() {
    if(amount<1)return; setLoading(true);
    api('create_invoice',{amount_usdt:amount}).then(function(r){
      if(r.ok){setInv(r);setStep(2);}else showToast('‚ùå –û—à–∏–±–∫–∞');
      setLoading(false);
    });
  }

  function check() {
    setLoading(true);
    api('check_invoice',{invoice_id:inv.invoice_id}).then(function(r){
      if(r.ok&&r.paid){Snd.i();Snd.win();burst(true);setBalance(function(b){return b+r.stars;});setInv(function(i){return Object.assign({},i,{confirmed_stars:r.stars});});setStep(3);showToast('‚úÖ +'+(r.stars)+' ‚òÖ –∑–∞—á–∏—Å–ª–µ–Ω–æ!');}
      else showToast('‚è≥ –ù–µ –æ–ø–ª–∞—á–µ–Ω–æ');
      setLoading(false);
    });
  }

  if(step===3) return React.createElement('div', null,
    React.createElement('div',{className:'res rw',style:{marginTop:0}},
      React.createElement('div',{className:'rbig'},'+'+(inv.confirmed_stars||inv.stars_total||inv.stars||0).toLocaleString()+' ‚òÖ'),
      React.createElement('div',{className:'rsub'},inv.is_first?'–í–ö–õ–Æ–ß–ê–Ø –ë–û–ù–£–° x2 üéÅ':'–ë–ê–õ–ê–ù–° –ü–û–ü–û–õ–ù–ï–ù!')
    ),
    React.createElement('div',{className:'card',style:{marginTop:12,textAlign:'center'}},
      React.createElement('div',{style:{fontSize:32,marginBottom:8}},'‚úÖ'),
      React.createElement('div',{style:{fontWeight:700}},'–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ'),
      React.createElement('div',{style:{color:'var(--mut)',fontSize:12,marginTop:4}},'–ë–∞–ª–∞–Ω—Å: '+balance.toLocaleString()+' ‚òÖ'),
      inv.demo?React.createElement('div',{style:{color:'var(--ruby)',fontSize:11,marginTop:8}},'üîß –î–µ–º–æ —Ä–µ–∂–∏–º'):null
    ),
    React.createElement('button',{className:'btn btn-gold',onClick:function(){setStep(1);setInv(null);}}, 'üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –µ—â—ë')
  );

  if(step===2) return React.createElement('div', null,
    React.createElement('div',{className:'dbadge'},'üîß –î–ï–ú–û –†–ï–ñ–ò–ú'),
    React.createElement('div',{className:'card',style:{textAlign:'center'}},
      React.createElement('div',{style:{fontSize:36,marginBottom:10}},'üí≥'),
      React.createElement('div',{style:{fontFamily:"'Cinzel',serif",fontSize:18,fontWeight:700,marginBottom:14}},'–°—á—ë—Ç —Å–æ–∑–¥–∞–Ω'),
      [
        ['–°—É–º–º–∞', inv.amount_usdt+' USDT'],
        ['–û—Å–Ω–æ–≤–Ω–∞—è', (inv.stars||0).toLocaleString()+' ‚òÖ'],
        inv.bonus_stars>0 ? ['üéÅ –ë–æ–Ω—É—Å x2', '+'+(inv.bonus_stars||0).toLocaleString()+' ‚òÖ'] : null,
        ['–ò—Ç–æ–≥–æ', (inv.stars_total||inv.stars||0).toLocaleString()+' ‚òÖ'],
        DEMO_MODE ? ['–†–µ–∂–∏–º', 'üîß –î–µ–º–æ'] : null
      ].filter(Boolean).map(function(row){
        return React.createElement('div',{key:row[0],className:'sl'},
          React.createElement('span',{className:'sk'},row[0]),
          React.createElement('span',{className:'sv'},row[1])
        );
      })
    ),
    React.createElement('button',{className:'btn btn-em',onClick:check,disabled:loading},
      loading?React.createElement('span',null,React.createElement('div',{className:'spinner'}),' –ó–ê–ß–ò–°–õ–Ø–ï–ú...'):'‚úÖ –ó–ê–ß–ò–°–õ–ò–¢–¨ –î–ï–ú–û'
    ),
    React.createElement('button',{className:'btn btn-ghost',onClick:function(){setStep(1);}}, '‚Üê –ù–ê–ó–ê–î')
  );

  return React.createElement('div', null,
    React.createElement('div',{className:'dbadge'},'üîß –î–ï–ú–û ‚Äî —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥ –Ω–µ—Ç'),
    !D.had_deposit&&DEMO_MODE ? React.createElement('div',{style:{background:'rgba(0,200,120,.08)',border:'1px solid rgba(0,200,120,.3)',borderRadius:12,padding:'12px 14px',marginBottom:12,display:'flex',alignItems:'center',gap:10}},
      React.createElement('span',{style:{fontSize:28}},'üéÅ'),
      React.createElement('div',null,
        React.createElement('div',{style:{fontWeight:700,fontSize:13,color:'var(--em2)'}},'–ë–æ–Ω—É—Å –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–æ–∑–∏—Ç–∞!'),
        React.createElement('div',{style:{fontSize:11,color:'var(--mut)',marginTop:2}},'–ü–µ—Ä–≤–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ √ó 2!')
      )
    ) : null,
    React.createElement('div',{className:'rbadge'},'üìä '+rateStr),
    React.createElement('div',{className:'card'},
      React.createElement('div',{className:'ctit'},'–°—É–º–º–∞'),
      React.createElement('div',{className:'fld'},
        React.createElement('div',{className:'flbl'},'–í USDT'),
        React.createElement('input',{className:'inp',type:'number',value:amount,onChange:function(e){setAmount(+e.target.value);}})
      ),
      React.createElement('div',{className:'pres'},
        [5,10,25,50,100].map(function(v){
          return React.createElement('button',{key:v,className:'pre '+(amount===v?'on':''),onClick:function(){setAmount(v);}},v+'$');
        })
      ),
      amount>=1?React.createElement('div',{style:{textAlign:'center',padding:'8px 0',color:'var(--gold2)',fontSize:15,fontFamily:"'Cinzel',serif",fontWeight:700}},
        '–ó–∞—á–∏—Å–ª–∏—Ç—Å—è: '+stars.toLocaleString()+' ‚òÖ'
      ):null
    ),
    React.createElement('button',{className:'btn btn-gold',onClick:create,disabled:amount<1||loading},
      loading?React.createElement('span',null,React.createElement('div',{className:'spinner'}),' –°–û–ó–î–ê–Å–ú...'):'üí≥ –ü–û–ü–û–õ–ù–ò–¢–¨ (–î–ï–ú–û)'
    )
  );
}


function WithdrawPage(props) {
  var balance = props.balance, setBalance = props.setBalance;
  var stSt = useState(1); var step = stSt[0]; var setStep = stSt[1];
  var stSt2 = useState(1000); var stars = stSt2[0]; var setStars = stSt2[1];
  var stLd = useState(false); var loading = stLd[0]; var setLoading = stLd[1];
  var stR = useState(''); var rateStr = stR[0]; var setRateStr = stR[1];
  var stRes = useState(null); var result = stRes[0]; var setResult = stRes[1];
  var MIN = 100;
  var usdt = parseFloat((stars*RATE).toFixed(2));

  useEffect(function(){
    api('rate',{},true).then(function(r){ if(r.ok) setRateStr(r.formatted||''); });
  }, []);

  function doWithdraw() {
    if(stars<MIN||stars>balance)return; setLoading(true);
    api('withdraw',{stars:stars}).then(function(r){
      if(r.ok){Snd.i();Snd.win();setBalance(function(b){return b-stars;});setResult(r);setStep(2);}
      else showToast(r.error||'‚ùå –û—à–∏–±–∫–∞');
      setLoading(false);
    });
  }

  if(step===2) return React.createElement('div', null,
    React.createElement('div',{className:'res rw',style:{marginTop:0}},
      React.createElement('div',{className:'rbig'},(result.usdt||usdt)+' USDT'),
      React.createElement('div',{className:'rsub'},'–í–´–í–û–î –í–´–ü–û–õ–ù–ï–ù')
    ),
    React.createElement('div',{className:'card',style:{marginTop:12,textAlign:'center'}},
      React.createElement('div',{style:{fontSize:32,marginBottom:8}},'‚úÖ'),
      React.createElement('div',{style:{fontWeight:700}},'–í—ã–≤–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω'),
      React.createElement('div',{style:{color:'var(--mut)',fontSize:12,marginTop:4}},'–û—Å—Ç–∞—Ç–æ–∫: '+balance.toLocaleString()+' ‚òÖ'),
      React.createElement('div',{style:{color:'var(--ruby)',fontSize:11,marginTop:8}},'üîß –î–µ–º–æ —Ä–µ–∂–∏–º ‚Äî —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥ –Ω–µ—Ç')
    ),
    React.createElement('button',{className:'btn btn-gold',onClick:function(){setStep(1);}}, 'üí∞ –í—ã–≤–µ—Å—Ç–∏ –µ—â—ë')
  );

  return React.createElement('div', null,
    React.createElement('div',{className:'dbadge'},'üîß –î–ï–ú–û ‚Äî —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥ –Ω–µ—Ç'),
    rateStr?React.createElement('div',{className:'rbadge'},'üìä '+rateStr):null,
    React.createElement('div',{className:'card'},
      React.createElement('div',{className:'ctit'},'–°—É–º–º–∞ –≤—ã–≤–æ–¥–∞'),
      React.createElement('div',{style:{textAlign:'right',fontSize:12,color:'var(--mut)',marginBottom:8}},'–î–æ—Å—Ç—É–ø–Ω–æ: '+balance.toLocaleString()+' ‚òÖ'),
      React.createElement('div',{className:'fld'},
        React.createElement('div',{className:'flbl'},'–í –∑–≤—ë–∑–¥–∞—Ö ‚òÖ'),
        React.createElement('input',{className:'inp',type:'number',value:stars,onChange:function(e){setStars(+e.target.value);}})
      ),
      React.createElement('div',{className:'pres'},
        [100,500,1000,5000].map(function(v){
          return React.createElement('button',{key:v,className:'pre '+(stars===v?'on':''),onClick:function(){setStars(v);}},v>=1000?v/1000+'K':v);
        }),
        React.createElement('button',{className:'pre',onClick:function(){setStars(balance);}}, 'MAX')
      ),
      stars>=MIN?React.createElement('div',{style:{textAlign:'center',padding:'8px 0',color:'var(--em2)',fontSize:15,fontFamily:"'Cinzel',serif",fontWeight:700}},
        '–ü–æ–ª—É—á–∏—Ç–µ: '+usdt+' USDT'
      ):null
    ),
    stars>balance?React.createElement('div',{style:{color:'var(--ruby)',fontSize:12,marginBottom:8,textAlign:'center'}},'‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤—ë–∑–¥'):null,
    stars<MIN?React.createElement('div',{style:{color:'var(--ruby)',fontSize:12,marginBottom:8,textAlign:'center'}},'‚ùå –ú–∏–Ω–∏–º—É–º '+MIN+' ‚òÖ'):null,
    React.createElement('button',{className:'btn btn-gold',onClick:doWithdraw,disabled:stars<MIN||stars>balance||loading},
      loading?React.createElement('span',null,React.createElement('div',{className:'spinner'}),' –í–´–í–û–î–ò–ú...'):'üí∞ –í–´–í–ï–°–¢–ò (–î–ï–ú–û)'
    )
  );
}


function HistoryPage() {
  var stIt = useState(null); var items = stIt[0]; var setItems = stIt[1];
  var ICO = {keno:'üé∞',slots:'üé∞',blackjack:'üÉè',roulette:'üé°',crash:'üöÄ'};
  useEffect(function(){ api('history',{},true).then(function(r){ setItems(r.ok?r.history:[]); }); }, []);
  if(!items) return React.createElement('div',{className:'loading'},React.createElement('div',{className:'spinner'}),' –ó–∞–≥—Ä—É–∂–∞–µ–º...');
  if(!items.length) return React.createElement('div',{style:{textAlign:'center',padding:40,color:'var(--mut)'}},'üìú –°—ã–≥—Ä–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∏–≥—Ä—É!');
  return React.createElement('div',{className:'card'},
    React.createElement('div',{className:'ctit'},'–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–≥—Ä—ã'),
    items.map(function(h,i){
      var p=(h.win||0)-(h.bet||0);
      return React.createElement('div',{key:i,className:'hrow'},
        React.createElement('div',{className:'hico'},ICO[h.game]||'üé≤'),
        React.createElement('div',{className:'hinfo'},
          React.createElement('div',{className:'hgame'},(h.game||'').toUpperCase()),
          React.createElement('div',{className:'hdate'},fmtDate(h.date)+' ¬∑ —Å—Ç–∞–≤–∫–∞ '+(h.bet||0).toLocaleString()+' ‚òÖ'),
          h.nonce!==undefined?React.createElement('div',{style:{fontSize:9,color:'var(--mut)',marginTop:1}},'–ò–≥—Ä–∞ #'+h.nonce):null
        ),
        React.createElement('div',{className:'hamt '+(p>=0?'w':'l')},(p>=0?'+':'')+p.toLocaleString()+' ‚òÖ')
      );
    })
  );
}


function TopPage() {
  var stTop = useState(null); var top = stTop[0]; var setTop = stTop[1];
  useEffect(function(){ api('top',{},true).then(function(r){ setTop(r.ok?r.top:[]); }); }, []);
  if(!top) return React.createElement('div',{className:'loading'},React.createElement('div',{className:'spinner'}),' –ó–∞–≥—Ä—É–∂–∞–µ–º...');
  var M=['ü•á','ü•à','ü•â'];
  return React.createElement('div',{className:'card'},
    React.createElement('div',{className:'ctit'},'üèÜ –¢–û–ü –∏–≥—Ä–æ–∫–æ–≤'),
    top.map(function(p,i){
      return React.createElement('div',{key:i,className:'trow'},
        React.createElement('div',{className:'trank '+(i===0?'g':i===1?'s':i===2?'b':'')},i<3?M[i]:(i+1)+'.'),
        React.createElement('div',{className:'tname'},p.username||'–ê–Ω–æ–Ω–∏–º',' ',React.createElement('span',{style:{fontSize:10,color:'var(--mut)'}},'VIP-'+p.vip)),
        React.createElement('div',{className:'tbal'},(p.balance||0).toLocaleString()+' ‚òÖ')
      );
    })
  );
}


function RefPage(props) {
  var userId = props.userId;
  var stCnt = useState(0); var count = stCnt[0]; var setCount = stCnt[1];
  var botName = "YOUR_BOT";
  var link = "https://t.me/"+botName+"?start=ref_"+userId;
  useEffect(function(){ api('referrals',{},true).then(function(r){ if(r.ok) setCount(r.count||0); }); }, []);
  function copy(){ navigator.clipboard&&navigator.clipboard.writeText(link).then(function(){showToast('‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!');});Snd.click(); }
  return React.createElement('div', null,
    React.createElement('div',{className:'card',style:{textAlign:'center',padding:'18px 15px'}},
      React.createElement('div',{style:{fontSize:36,marginBottom:8}},'üë•'),
      React.createElement('div',{style:{fontFamily:"'Cinzel',serif",fontSize:16,fontWeight:700,marginBottom:4}},'–†–µ—Ñ–µ—Ä–∞–ª–∫–∞'),
      React.createElement('div',{style:{color:'var(--mut)',fontSize:12}},'+500 ‚òÖ –∑–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞')
    ),
    React.createElement('div',{style:{display:'flex',gap:10,marginBottom:14}},
      React.createElement('div',{className:'rss'},React.createElement('div',{className:'rssv'},count),React.createElement('div',{className:'rssl'},'–î—Ä—É–∑–µ–π')),
      React.createElement('div',{className:'rss'},React.createElement('div',{className:'rssv'},(count*500).toLocaleString()),React.createElement('div',{className:'rssl'},'–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ ‚òÖ'))
    ),
    React.createElement('div',{className:'card'},
      React.createElement('div',{className:'ctit'},'–í–∞—à–∞ —Å—Å—ã–ª–∫–∞'),
      React.createElement('div',{className:'ref-link',onClick:copy},link),
      React.createElement('div',{className:'g2'},
        React.createElement('button',{className:'btn btn-gold',onClick:copy},'üìã –ö–û–ü–ò–†–û–í–ê–¢–¨'),
        React.createElement('button',{className:'btn btn-ghost',onClick:function(){tg&&tg.switchInlineQuery&&tg.switchInlineQuery('–ò–≥—Ä–∞–π –≤ Royal Keno KZ! üé∞\n'+link);}},'üì§ –ü–û–î–ï–õ–ò–¢–¨–°–Ø')
      )
    )
  );
}




function CrashGame(props) {
  var balance = props.balance, setBalance = props.setBalance;
  var stBet = useState(50); var bet = stBet[0]; var setBet = stBet[1];
  var stTgt = useState(2.0); var target = stTgt[0]; var setTarget = stTgt[1];
  var stPh = useState('idle'); var phase = stPh[0]; var setPhase = stPh[1];
  var stMult = useState(1.00); var mult = stMult[0]; var setMult = stMult[1];
  var stCrash = useState(null); var crashAt = stCrash[0]; var setCrashAt = stCrash[1];
  var stRes = useState(null); var result = stRes[0]; var setResult = stRes[1];
  var ivRef = useRef(null);
  var cvRef = useRef(null);
  var ptsRef = useRef([]);

  function genCrash() {
    var r = Math.random();
    return r < 0.05 ? 1.00 : Math.min(Math.round((.95/(1-r))*100)/100, 100);
  }

  function draw() {
    var cv = cvRef.current; if(!cv) return;
    var ctx = cv.getContext('2d'), w = cv.width, h = cv.height;
    ctx.clearRect(0,0,w,h);
    if(ptsRef.current.length < 2) return;
    var p = ptsRef.current;
    var mx = Math.max.apply(null, p.concat([2]));
    ctx.beginPath();
    ctx.moveTo(w*.05, h-(p[0]/mx)*h*.85-h*.05);
    for(var i=1;i<p.length;i++) {
      ctx.lineTo(w*.05+(i/(p.length-1))*w*.9, h-(p[i]/mx)*h*.85-h*.05);
    }
    ctx.strokeStyle='#00FF9A'; ctx.lineWidth=2.5;
    ctx.shadowColor='#00FF9A'; ctx.shadowBlur=8; ctx.stroke();
  }

  function start() {
    if(bet<50||bet>balance)return; Snd.i();
    var cp = genCrash(); setCrashAt(cp); setPhase('fly'); setResult(null);
    setBalance(function(b){return b-bet;}); ptsRef.current=[1]; var cur=1.0;
    ivRef.current = setInterval(function(){
      cur = Math.round((cur+cur*.025)*100)/100;
      setMult(cur); ptsRef.current.push(cur); draw();
      if(cur>=target){
        clearInterval(ivRef.current);
        var win=Math.floor(bet*target);
        setBalance(function(b){return b+win;});
        setPhase('idle'); setResult({win:win,profit:win-bet,ok:true});
        Snd.win(); burst(true);
        api('play',{game:'crash',bet:bet,win:win});
        return;
      }
      if(cur>=cp){
        clearInterval(ivRef.current);
        setPhase('boom'); setResult({win:0,profit:-bet,ok:false});
        Snd.lose();
        setTimeout(function(){setPhase('idle');},1500);
        api('play',{game:'crash',bet:bet,win:0});
      }
    }, 120);
  }

  useEffect(function(){ return function(){ clearInterval(ivRef.current); }; }, []);

  return React.createElement('div', null,
    React.createElement('div', {className:'arena'},
      React.createElement('canvas',{ref:cvRef,width:400,height:185,style:{position:'absolute',inset:0,width:'100%',height:'100%'}}),
      React.createElement('div',{className:'cmult '+phase},mult.toFixed(2)+'x'),
      React.createElement('div',{className:'cst '+phase},
        phase==='idle'?'–°–¢–ê–í–¨–¢–ï':phase==='fly'?'üöÄ –í –ü–û–õ–Å–¢–ï':'üí• –ö–†–ê–® '+crashAt+'x'
      )
    ),
    phase==='idle'?React.createElement('div',null,
      React.createElement(BetInput,{value:bet,onChange:setBet,balance:balance}),
      React.createElement('div',{className:'card'},
        React.createElement('div',{className:'ctit'},'–ó–∞–±—Ä–∞—Ç—å –Ω–∞'),
        React.createElement('div',{className:'pres'},
          [1.5,2,3,5,10].map(function(p){
            return React.createElement('button',{key:p,className:'pre '+(target===p?'on':''),onClick:function(){setTarget(p);}}, 'x'+p);
          })
        ),
        React.createElement('input',{className:'inp',type:'number',step:'.1',value:target,
          onChange:function(e){setTarget(Math.max(1.01,Math.min(100,+e.target.value||1.01)));}})
      ),
      React.createElement('button',{className:'btn btn-gold',onClick:start,disabled:bet<50||bet>balance},'üöÄ –ó–ê–ü–£–°–¢–ò–¢–¨')
    ):null,
    result?React.createElement('div',{className:'res '+(result.ok?'rw':'rl')},
      React.createElement('div',{className:'rbig'},result.ok?'+'+result.win.toLocaleString():result.profit.toLocaleString()+' ‚òÖ'),
      React.createElement('div',{className:'rsub'},result.ok?'–ó–ê–ë–†–ê–õ–ò –ù–ê x'+target:'–£–ü–ê –ù–ê x'+crashAt)
    ):null
  );
}


var SYMS = ['üçã','üçä','üçá','üîî','üíé','7Ô∏è‚É£','üé∞'];
var SWGTS = [30,25,20,12,8,4,1];
var PAYS3 = {'üçã':3,'üçä':5,'üçá':8,'üîî':15,'üíé':40,'7Ô∏è‚É£':80,'üé∞':300};
var PAYS2 = {'üçã':1,'üçä':1,'üçá':1,'üîî':2,'üíé':3,'7Ô∏è‚É£':5,'üé∞':10};

function slotRand() {
  var s = SWGTS.reduce(function(a,b){return a+b;}, 0);
  var r = Math.random()*s;
  for(var i=0;i<SYMS.length;i++){r-=SWGTS[i];if(r<=0)return SYMS[i];}
  return SYMS[0];
}

function SlotsGame(props) {
  var balance = props.balance, setBalance = props.setBalance;
  var stBet = useState(50); var bet = stBet[0]; var setBet = stBet[1];
  var stReels = useState(['üíé','üíé','üíé']); var reels = stReels[0]; var setReels = stReels[1];
  var stSpin = useState([false,false,false]); var spin = stSpin[0]; var setSpin = stSpin[1];
  var stWin = useState(null); var winRes = stWin[0]; var setWinRes = stWin[1];
  var stBusy = useState(false); var busy = stBusy[0]; var setBusy = stBusy[1];

  function go() {
    if(bet<50||bet>balance||busy) return;
    Snd.i(); setBusy(true); setWinRes(null); setBalance(function(b){return b-bet;});
    var final = [slotRand(),slotRand(),slotRand()];
    setSpin([true,true,true]);
    [0,1,2].forEach(function(i){
      setTimeout(function(){
        Snd.deal();
        setSpin(function(s){var n=s.slice();n[i]=false;return n;});
        setReels(function(r){var n=r.slice();n[i]=final[i];return n;});
        if(i===2){
          var a=final[0],b2=final[1],c=final[2];
          var w=0, txt='';
          if(a===b2&&b2===c){
            w=Math.floor(bet*PAYS3[a]);
            txt='–¢—Ä–∏ '+a+'! x'+PAYS3[a];
          } else {
            var pair=null;
            if(a===b2) pair=a;
            else if(b2===c) pair=b2;
            else if(a===c) pair=a;
            if(pair){
              var pm=PAYS2[pair]||1;
              w=Math.floor(bet*pm);
              txt='–ü–∞—Ä–∞ '+pair+' x'+pm;
            } else {
              txt='–ù–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π';
            }
          }
          if(w>0){setBalance(function(b){return b+w;});Snd.win();if(w>bet*10)Snd.jackpot();burst(true);}
          else Snd.lose();
          setWinRes({w:w,profit:w-bet,txt:txt});
          setBusy(false);
          api('play',{game:'slots',bet:bet,win:w});
        }
      }, 400+i*350);
    });
  }

  return React.createElement('div', null,
    React.createElement('div',{className:'smach'},
      React.createElement('div',{className:'reels'},
        reels.map(function(s,i){
          return React.createElement('div',{key:i,className:'reel'+(winRes&&winRes.w>0&&!spin[i]?' win':'')},
            spin[i]?SYMS[Math.floor(Math.random()*SYMS.length)]:s
          );
        })
      ),
      React.createElement('div',{className:'sline'})
    ),
    React.createElement(BetInput,{value:bet,onChange:setBet,balance:balance}),
    React.createElement('button',{className:'btn btn-gold',onClick:go,disabled:busy||bet<50||bet>balance},
      busy?'‚è≥ –ö–†–£–¢–ò–¢–°–Ø...':'üé∞ –ö–†–£–¢–ò–¢–¨'
    ),
    winRes?React.createElement('div',{className:'res '+(winRes.w>0?'rw':'rl')},
      React.createElement('div',{className:'rbig'},winRes.w>0?'+'+winRes.w.toLocaleString():winRes.profit.toLocaleString()+' ‚òÖ'),
      React.createElement('div',{className:'rsub'},winRes.txt)
    ):null,
    React.createElement('div',{className:'card',style:{marginTop:12}},
      React.createElement('div',{className:'ctit'},'–í—ã–ø–ª–∞—Ç—ã'),
      React.createElement('div',{style:{fontSize:10,color:'var(--mut)',marginBottom:6}},'–ó–∞ 3 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö:'),
      Object.keys(PAYS3).map(function(s){
        return React.createElement('div',{key:s,className:'sl'},
          React.createElement('span',{className:'sk'},s+s+s),
          React.createElement('span',{className:'sv',style:{color:'var(--gold2)'}},'x'+PAYS3[s])
        );
      }),
      React.createElement('div',{style:{fontSize:10,color:'var(--mut)',margin:'8px 0 6px'}},'–ó–∞ 2 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö:'),
      Object.keys(PAYS2).map(function(s){
        return React.createElement('div',{key:s,className:'sl'},
          React.createElement('span',{className:'sk'},s+s+' ?'),
          React.createElement('span',{className:'sv',style:{color:'var(--em)',fontSize:11}},'x'+PAYS2[s])
        );
      })
    )
  );
}


var S5=['‚ô†','‚ô•','‚ô¶','‚ô£'], V5=['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
function mkDk(){return V5.reduce(function(a,v){return a.concat(S5.map(function(s){return v+s;}));},[]).sort(function(){return Math.random()-.5;});}
function cVal(c){var v=c.slice(0,-1);if('JQK'.includes(v))return 10;if(v==='A')return 11;return +v;}
function hVal(h){var t=h.reduce(function(a,c){return a+cVal(c);},0),ac=h.filter(function(c){return c.startsWith('A');}).length;while(t>21&&ac){t-=10;ac--;}return t;}
function isRed(c){return c.endsWith('‚ô•')||c.endsWith('‚ô¶');}

function BJCard(props) {
  var c = props.c, back = props.back;
  if(back) return React.createElement('div',{className:'pc bk'},'üÇ†');
  var v=c.slice(0,-1), s=c.slice(-1);
  return React.createElement('div',{className:'pc '+(isRed(c)?'rd':'wh')},
    React.createElement('div',null,v),
    React.createElement('div',{style:{fontSize:10}},s),
    React.createElement('span',{className:'pcs'},s)
  );
}

function BJGame(props) {
  var balance = props.balance, setBalance = props.setBalance;
  var stBet = useState(50); var bet = stBet[0]; var setBet = stBet[1];
  var stPh = useState('bet'); var phase = stPh[0]; var setPhase = stPh[1];
  var stDk = useState([]); var deck = stDk[0]; var setDeck = stDk[1];
  var stPl = useState([]); var player = stPl[0]; var setPlayer = stPl[1];
  var stDl = useState([]); var dealer = stDl[0]; var setDealer = stDl[1];
  var stRes = useState(null); var result = stRes[0]; var setResult = stRes[1];

  function dealCards() {
    if(bet<50||bet>balance)return; Snd.i();
    var d=mkDk(), p=[d.pop(),d.pop()], dl=[d.pop(),d.pop()];
    setDeck(d); setPlayer(p); setDealer(dl); setResult(null);
    setBalance(function(b){return b-bet;}); Snd.deal();
    setTimeout(function(){Snd.deal();},150); setPhase('play');
    if(hVal(p)===21) setTimeout(function(){finish(p,dl,d,bet);},400);
  }

  function hit() {
    var d=deck.slice(), p=player.concat([d.pop()]);
    Snd.deal(); setDeck(d); setPlayer(p);
    if(hVal(p)>21) finish(p,dealer,d,bet);
    else if(hVal(p)===21) setTimeout(function(){finish(p,dealer,d,bet);},300);
  }

  function stand(p2,dl2,d2,b2) {
    p2=p2||player; dl2=dl2||dealer; d2=d2||deck; b2=b2||bet;
    var fd=dl2.slice(), fd2=d2.slice();
    while(hVal(fd)<17) fd.push(fd2.pop());
    setDealer(fd); finish(p2,fd,fd2,b2);
  }

  function dbl() {
    if(balance<bet)return;
    setBalance(function(b){return b-bet;});
    var nb=bet*2, d=deck.slice(), p=player.concat([d.pop()]);
    Snd.deal(); setDeck(d); setPlayer(p);
    if(hVal(p)>21) finish(p,dealer,d,nb);
    else setTimeout(function(){stand(p,dealer,d,nb);},300);
  }

  function finish(p,dl,d,b) {
    var pv=hVal(p), dv=hVal(dl), win=0, txt='', type='lose';
    if(pv>21){txt='üí• –ü–µ—Ä–µ–±–æ—Ä!';}
    else if(pv===21&&p.length===2){win=Math.floor(b*2.5);txt='üéâ –ë–õ–≠–ö–î–ñ–ï–ö!';type='win';}
    else if(dv>21||pv>dv){win=b*2;txt='üéâ –ü–æ–±–µ–¥–∞!';type='win';}
    else if(pv===dv){win=b;txt='ü§ù –ù–∏—á—å—è';type='tie';}
    else{txt='üòî –î–∏–ª–µ—Ä –ø–æ–±–µ–¥–∏–ª';}
    if(win>0){setBalance(function(b2){return b2+win;});Snd.win();burst(win>b);}else Snd.lose();
    setResult({win:win,profit:win-b,txt:txt,type:type});
    setPhase('done');
    api('play',{game:'blackjack',bet:b,win:win});
  }

  return React.createElement('div', null,
    React.createElement('div',{className:'felt'},
      phase!=='bet'?React.createElement('div',null,
        React.createElement('div',{className:'hlbl'},'–î–∏–ª–µ—Ä '+(phase==='done'?'('+hVal(dealer)+')':'')),
        React.createElement('div',{className:'hand'},dealer.map(function(c,i){return React.createElement(BJCard,{key:i,c:c,back:phase==='play'&&i===1});})),
        React.createElement('div',{style:{borderTop:'1px solid rgba(255,255,255,.06)',margin:'7px 0'}}),
        React.createElement('div',{className:'hlbl'},'–í—ã ('+hVal(player)+')'),
        React.createElement('div',{className:'hand'},player.map(function(c,i){return React.createElement(BJCard,{key:i,c:c});}))
      ):React.createElement('div',{style:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',height:'100%',paddingTop:20}},
        React.createElement('div',{style:{fontSize:42,animation:'float 2s ease infinite'}},'üÉè')
      )
    ),
    (phase==='bet'||phase==='done')?React.createElement(BetInput,{value:bet,onChange:setBet,balance:balance}):null,
    phase==='bet'?React.createElement('button',{className:'btn btn-gold',onClick:dealCards,disabled:bet<50||bet>balance},'üÉè –†–ê–ó–î–ê–¢–¨'):null,
    phase==='play'?React.createElement('div',{className:'g2'},
      React.createElement('button',{className:'btn btn-em',onClick:hit},'üëä –ï–©–Å'),
      React.createElement('button',{className:'btn btn-ghost',onClick:function(){stand();}}, '‚úã –°–¢–û–ü'),
      player.length===2&&balance>=bet?React.createElement('button',{className:'btn btn-gold',style:{gridColumn:'span 2'},onClick:dbl},'üí∞ –£–î–í–û–ò–¢–¨'):null
    ):null,
    phase==='done'&&result?React.createElement('div',null,
      React.createElement('div',{className:'res r'+result.type},
        React.createElement('div',{className:'rbig'},result.win>0?'+'+result.win.toLocaleString():result.profit.toLocaleString()+' ‚òÖ'),
        React.createElement('div',{className:'rsub'},result.txt)
      ),
      React.createElement('button',{className:'btn btn-gold',style:{marginTop:8},onClick:function(){setPhase('bet');}}, 'üîÑ –°–ù–û–í–ê')
    ):null
  );
}


var RN = new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
var BT2 = [
  {id:'red',l:'üî¥ –ö—Ä–∞—Å–Ω–æ–µ',m:2},{id:'black',l:'‚ö´ –ß—ë—Ä–Ω–æ–µ',m:2},
  {id:'even',l:'–ß–Å–¢–ù–û–ï',m:2},{id:'odd',l:'–ù–ï–ß–Å–¢–ù–û–ï',m:2},
  {id:'low',l:'1‚Äì18',m:2},{id:'high',l:'19‚Äì36',m:2}
];

function RouletteGame(props) {
  var balance = props.balance, setBalance = props.setBalance;
  var stBet = useState(50); var bet = stBet[0]; var setBet = stBet[1];
  var stType = useState('red'); var type = stType[0]; var setType = stType[1];
  var stSpin = useState(false); var spinning = stSpin[0]; var setSpinning = stSpin[1];
  var stRes = useState(null); var result = stRes[0]; var setResult = stRes[1];
  var stRot = useState(0); var rot = stRot[0]; var setRot = stRot[1];
  var stLast = useState(null); var last = stLast[0]; var setLast = stLast[1];

  function go() {
    if(bet<50||bet>balance||spinning)return; Snd.i(); setSpinning(true); setResult(null);
    setBalance(function(b){return b-bet;});
    var num=Math.floor(Math.random()*37); setLast(num);
    setRot(function(r){return r+1440+Math.random()*360;});
    setTimeout(function(){
      var col=num===0?'green':RN.has(num)?'red':'black';
      var win=0;
      if(type==='red'&&col==='red') win=bet*2;
      else if(type==='black'&&col==='black') win=bet*2;
      else if(type==='even'&&num!==0&&num%2===0) win=bet*2;
      else if(type==='odd'&&num%2===1) win=bet*2;
      else if(type==='low'&&num>=1&&num<=18) win=bet*2;
      else if(type==='high'&&num>=19&&num<=36) win=bet*2;
      if(win>0){setBalance(function(b){return b+win;});Snd.win();burst(true);}else Snd.lose();
      setResult({win:win,profit:win-bet,num:num,col:col});
      setSpinning(false);
      api('play',{game:'roulette',bet:bet,win:win});
    }, 2600);
  }

  return React.createElement('div', null,
    React.createElement('div',{className:'ws'},
      React.createElement('div',{style:{position:'relative'}},
        React.createElement('div',{className:'wp'}),
        React.createElement('div',{className:'wo',style:{transform:'rotate('+rot+'deg)'}},
          React.createElement('div',{className:'wi'},last!==null?last:'?')
        )
      )
    ),
    React.createElement('div',{className:'bts'},
      BT2.map(function(t){
        return React.createElement('button',{key:t.id,className:'bbt '+(type===t.id?'on':''),
          onClick:function(){Snd.click();setType(t.id);}},
          t.l,' ',React.createElement('span',{style:{color:'var(--mut)',fontSize:10}},'x'+t.m)
        );
      })
    ),
    React.createElement(BetInput,{value:bet,onChange:setBet,balance:balance}),
    React.createElement('button',{className:'btn btn-gold',onClick:go,disabled:spinning||bet<50||bet>balance},
      spinning?'‚è≥ –ö–†–£–¢–ò–¢–°–Ø...':'üé° –ö–†–£–¢–ò–¢–¨'
    ),
    result?React.createElement('div',{className:'res '+(result.win>0?'rw':'rl')},
      React.createElement('div',{style:{fontSize:16,marginBottom:5}},
        '–í—ã–ø–∞–ª–æ: ',React.createElement('b',{style:{color:result.col==='red'?'var(--ruby)':result.col==='green'?'var(--em2)':'var(--txt)'}},result.num)
      ),
      React.createElement('div',{className:'rbig'},result.win>0?'+'+result.win.toLocaleString():result.profit.toLocaleString()+' ‚òÖ')
    ):null
  );
}


var KP = {
  1:{1:3},
  2:{1:1,2:9},
  3:{1:1,2:2,3:22},
  4:{2:2,3:5,4:75},
  5:{2:1,3:3,4:15,5:500},
  6:{3:2,4:6,5:70,6:1000},
  7:{3:1,4:5,5:25,6:250,7:3000},
  8:{4:2,5:10,6:75,7:700,8:7500},
  9:{4:2,5:6,6:40,7:280,8:3000,9:18000},
  10:{4:1,5:3,6:22,7:150,8:1200,9:6000,10:80000}
};

function KenoGame(props) {
  var balance = props.balance, setBalance = props.setBalance;
  var stBet = useState(50); var bet = stBet[0]; var setBet = stBet[1];
  var stSel = useState({}); var sel = stSel[0]; var setSel = stSel[1];
  var stDrw = useState({}); var drawn = stDrw[0]; var setDrawn = stDrw[1];
  var stHit = useState({}); var hitSet = stHit[0]; var setHitSet = stHit[1];
  var stRes = useState(null); var result = stRes[0]; var setResult = stRes[1];
  var stBusy = useState(false); var busy = stBusy[0]; var setBusy = stBusy[1];
  var selCount = Object.keys(sel).length;
  var drwCount = Object.keys(drawn).length;
  var hitCount = Object.keys(hitSet).length;

  function tog(n) {
    if(busy) return; Snd.click();
    setSel(function(s){
      var ns = Object.assign({},s);
      if(ns[n]) delete ns[n];
      else if(Object.keys(ns).length < 10) ns[n]=1;
      return ns;
    });
    setDrawn({}); setHitSet({}); setResult(null);
  }

  function autoSel() {
    var ns = {};
    var nums = Array.from({length:80},function(_,i){return i+1;}).sort(function(){return Math.random()-.5;});
    for(var i=0;i<10;i++) ns[nums[i]]=1;
    setSel(ns); setDrawn({}); setHitSet({}); setResult(null);
  }

  function play() {
    if(!selCount||bet<50||bet>balance||busy) return;
    Snd.i(); setBusy(true); setResult(null); setBalance(function(b){return b-bet;});
    var drawnNums = Array.from({length:80},function(_,i){return i+1;}).sort(function(){return Math.random()-.5;}).slice(0,20);
    var drawnMap = {}; drawnNums.forEach(function(n){drawnMap[n]=1;});
    var hitsMap = {};
    Object.keys(sel).forEach(function(n){if(drawnMap[n]) hitsMap[n]=1;});
    var hc = Object.keys(hitsMap).length, sc = selCount;
    var m = (KP[sc]&&KP[sc][hc]) || 0;
    var win = Math.floor(bet*m);
    if(win>0){setBalance(function(b){return b+win;});}
    var i2=0;
    var iv = setInterval(function(){
      if(i2>=drawnNums.length){
        clearInterval(iv);
        setResult({win:win,profit:win-bet,hits:hc,spot:sc,m:m});
        setBusy(false);
        if(win>0){setTimeout(function(){Snd.win();if(win>bet*10)Snd.jackpot();},500);burst(win>0);}
        else setTimeout(function(){Snd.lose();},1000);
        api('play',{game:'keno',bet:bet,spot:sc,hits:hc,win:win});
        return;
      }
      var num = drawnNums[i2]; i2++;
      Snd.tick();
      setDrawn(function(d){var nd=Object.assign({},d);nd[num]=1;return nd;});
      if(hitsMap[num]) setHitSet(function(h){var nh=Object.assign({},h);nh[num]=1;return nh;});
    }, 60);
  }

  return React.createElement('div', null,
    React.createElement('div',{className:'ksts'},
      React.createElement('div',null,React.createElement('div',{className:'ksv'},selCount,React.createElement('span',{style:{color:'var(--mut)',fontSize:11}},'/10')),React.createElement('div',{className:'ksl'},'–í—ã–±—Ä–∞–Ω–æ')),
      React.createElement('div',null,React.createElement('div',{className:'ksv'},drwCount,React.createElement('span',{style:{color:'var(--mut)',fontSize:11}},'/20')),React.createElement('div',{className:'ksl'},'–í—ã–ø–∞–ª–æ')),
      React.createElement('div',null,React.createElement('div',{className:'ksv',style:{color:'var(--em2)'}},hitCount),React.createElement('div',{className:'ksl'},'–°–æ–≤–ø–∞–ª–æ'))
    ),
    React.createElement('div',{className:'kg'},
      Array.from({length:80},function(_,i){return i+1;}).map(function(n){
        var isSel=sel[n], isHit=hitSet[n], isDrw=drawn[n]&&!isHit;
        return React.createElement('div',{key:n,className:'kn'+(isSel&&!isDrw&&!isHit?' sel':'')+(isDrw?' drw':'')+(isHit?' hit':''),
          onClick:function(){tog(n);}},n);
      })
    ),
    React.createElement(BetInput,{value:bet,onChange:setBet,balance:balance}),
    React.createElement('div',{className:'g2',style:{marginBottom:8}},
      React.createElement('button',{className:'btn btn-ghost',onClick:function(){setSel({});setDrawn({});setHitSet({});setResult(null);}},'–û–ß–ò–°–¢–ò–¢–¨'),
      React.createElement('button',{className:'btn btn-ghost',onClick:autoSel},'–ê–í–¢–û')
    ),
    React.createElement('button',{className:'btn btn-gold',onClick:play,disabled:busy||!selCount||bet<50||bet>balance},
      busy?'‚è≥ –†–û–ó–´–ì–†–´–®...':'üé∞ –ò–ì–†–ê–¢–¨'
    ),
    result?React.createElement('div',{className:'res '+(result.win>0?'rw':'rl')},
      React.createElement('div',{className:'rbig'},result.win>0?'+'+result.win.toLocaleString():result.profit.toLocaleString()+' ‚òÖ'),
      React.createElement('div',{className:'rsub'},result.hits+'/'+result.spot+' –°–û–í–ü–ê–î–ï–ù–ò–ô'+(result.m>0?' x'+result.m:''))
    ):null
  );
}


var GAME_TABS = [{id:'keno',l:'üé∞ KENO'},{id:'crash',l:'üöÄ –ö–†–ê–®'},{id:'slots',l:'üé∞ –°–õ–û–¢–´'},{id:'bj',l:'üÉè –ë–ñ'},{id:'rlt',l:'üé° –†–¢–ö'}];
var BOT_TABS  = [{id:'play',l:'üéÆ'},{id:'bonus',l:'üéÅ'},{id:'topup',l:'üí≥'},{id:'withdraw',l:'üí∞'},{id:'history',l:'üìú'},{id:'top',l:'üèÜ'},{id:'ref',l:'üë•'},{id:'profile',l:'üëë'}];
var TITLES    = {play:'–ò–≥—Ä—ã',bonus:'–ë–æ–Ω—É—Å',topup:'–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ',withdraw:'–í—ã–≤–æ–¥',history:'–ò—Å—Ç–æ—Ä–∏—è',top:'–¢–û–ü-10',ref:'–†–µ—Ñ–µ—Ä–∞–ª–∫–∞',profile:'–ü—Ä–æ—Ñ–∏–ª—å'};

function App() {
  var stReg = useState(null); var reg = stReg[0]; var setReg = stReg[1];
  var stProf = useState(null); var profile = stProf[0]; var setProfile = stProf[1];
  var stBal = useState(500); var balance = stBal[0]; var setBalance = stBal[1];
  var stTab = useState('play'); var tab = stTab[0]; var setTab = stTab[1];
  var stGt = useState('keno'); var gt = stGt[0]; var setGt = stGt[1];

  useEffect(function(){
    if(tg){tg.ready();tg.expand();if(tg.setHeaderColor)tg.setHeaderColor('#050508');if(tg.setBackgroundColor)tg.setBackgroundColor('#050508');}
    api('profile',{},true).then(function(r){
      if(r.ok&&r.data){setProfile(r.data);setBalance(r.data.balance||500);setReg(true);}
      else setReg(false);
    });
  }, []);

  function onReg(d) {
    setProfile({username:d.username,vip:1,total_bet:0,total_win:0,wins:0,games:0,hashed_seed:D.hashed_seed,nonce:0});
    setBalance(d.balance||500);
    setReg(true);
    showToast('üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, '+d.username+'!');
  }

  function refresh() {
    api('profile').then(function(r){
      if(r.ok&&r.data){setProfile(r.data);setBalance(r.data.balance);}
      showToast('‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ');
    });
  }

  if(reg===null) return React.createElement('div',{style:{display:'flex',alignItems:'center',justifyContent:'center',height:'100vh',flexDirection:'column',gap:12,background:'var(--obs)'}},
    React.createElement('div',{style:{fontFamily:"'Cinzel',serif",fontSize:16,fontWeight:900,background:'linear-gradient(135deg,#8B6914,#F5D060)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',letterSpacing:3}},'ROYAL KENO KZ'),
    React.createElement('div',{className:'spinner',style:{width:28,height:28,borderWidth:3}})
  );

  if(!reg) return React.createElement('div',{className:'app'},
    React.createElement('div',{className:'hdr'},React.createElement('div',{className:'logo'},'ROYAL KENO KZ')),
    React.createElement('div',{className:'scr'},React.createElement(Registration,{onDone:onReg}))
  );

  return React.createElement('div',{className:'app'},
    React.createElement('div',{className:'hdr'},
      React.createElement('div',{style:{display:'flex',alignItems:'center',gap:8}},
        tab!=='play'?React.createElement('button',{style:{background:'none',border:'none',color:'var(--gold)',fontSize:20,cursor:'pointer',lineHeight:1},onClick:function(){setTab('play');}}, '‚Äπ'):null,
        React.createElement('div',{className:'logo'},tab==='play'?'ROYAL KENO KZ':TITLES[tab])
      ),
      React.createElement('div',{className:'bal',onClick:function(){setTab('profile');}},
        React.createElement('span',{style:{fontSize:13}},'‚òÖ'),
        React.createElement('span',{className:'bal-amt'},balance.toLocaleString())
      )
    ),
    tab==='play'?React.createElement('div',{className:'subnav'},
      GAME_TABS.map(function(t){
        return React.createElement('button',{key:t.id,className:'snv '+(gt===t.id?'on':''),
          onClick:function(){Snd.click();setGt(t.id);}},t.l);
      })
    ):null,
    React.createElement('div',{className:'scr'},
      tab==='play'&&gt==='keno'   ? React.createElement(KenoGame,    {balance:balance,setBalance:setBalance}) : null,
      tab==='play'&&gt==='crash'  ? React.createElement(CrashGame,   {balance:balance,setBalance:setBalance}) : null,
      tab==='play'&&gt==='slots'  ? React.createElement(SlotsGame,   {balance:balance,setBalance:setBalance}) : null,
      tab==='play'&&gt==='bj'     ? React.createElement(BJGame,      {balance:balance,setBalance:setBalance}) : null,
      tab==='play'&&gt==='rlt'    ? React.createElement(RouletteGame,{balance:balance,setBalance:setBalance}) : null,
      tab==='bonus'    ? React.createElement(BonusPage,  {balance:balance,setBalance:setBalance,vip:profile&&profile.vip||1}) : null,
      tab==='topup'    ? React.createElement(TopupPage,  {balance:balance,setBalance:setBalance}) : null,
      tab==='withdraw' ? React.createElement(WithdrawPage,{balance:balance,setBalance:setBalance}) : null,
      tab==='history'  ? React.createElement(HistoryPage,{}) : null,
      tab==='top'      ? React.createElement(TopPage,    {}) : null,
      tab==='ref'      ? React.createElement(RefPage,    {userId:tgUser&&tgUser.id||0}) : null,
      tab==='profile'  ? React.createElement(ProfilePage,{profile:profile||{},balance:balance,onRefresh:refresh}) : null
    ),
    React.createElement('div',{className:'bnav'},
      BOT_TABS.map(function(t){
        return React.createElement('button',{key:t.id,className:'bni',onClick:function(){Snd.click();setTab(t.id);}},
          React.createElement('span',null,t.l),
          React.createElement('span',{className:'dot',style:{background:tab===t.id?'var(--gold)':'transparent'}})
        );
      })
    )
  );
}

ReactDOM.render(React.createElement(App), document.getElementById('root'));
</script>
</body>
</html></script>
</body>
</html></script>
</body>
</html></script>
</body>
</html>
